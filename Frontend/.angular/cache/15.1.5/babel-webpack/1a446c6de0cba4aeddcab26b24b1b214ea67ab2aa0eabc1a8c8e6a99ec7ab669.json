{"ast":null,"code":"import { catchError, map } from 'rxjs/operators';\nimport { throwError } from 'rxjs';\nimport { HttpHeaders } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\n// user class \nexport class User {}\nexport class CrudService {\n  constructor(httpClient) {\n    this.httpClient = httpClient;\n    this.tokenKey = 'token';\n    this.REST_API = 'http://127.0.0.1:8000/api/medicament';\n    this.httpHeaders = new HttpHeaders().set('Content-Type', 'application/json');\n  }\n  addMedicament(data) {\n    let API_URL = `${this.REST_API}`;\n    return this.httpClient.post(API_URL, data).pipe(catchError(this.handleError));\n  }\n  getMedicaments() {\n    return this.httpClient.get(`${this.REST_API}`);\n  }\n  getMedicament(id) {\n    let API_URL = `${this.REST_API}/${id}`;\n    return this.httpClient.get(API_URL, {\n      headers: this.httpHeaders\n    }).pipe(map(res => {\n      return res || {};\n    }), catchError(this.handleError));\n  }\n  deleteMedicament(id) {\n    let API_URL = `${this.REST_API}/${id}`;\n    return this.httpClient.delete(API_URL, {\n      headers: this.httpHeaders\n    }).pipe(catchError(this.handleError));\n  }\n  updateMedicament(id, data) {\n    let API_URL = `${this.REST_API}/${id}`;\n    return this.httpClient.put(API_URL, data, {\n      headers: this.httpHeaders\n    }).pipe(catchError(this.handleError));\n  }\n  handleError(error) {\n    let errorMessage = '';\n    if (error.error instanceof ErrorEvent) {\n      errorMessage = error.error.message;\n    } else {\n      errorMessage = `Error Code : ${error.status}\\n Message: ${errorMessage}`;\n    }\n    console.log(errorMessage);\n    return throwError(errorMessage);\n  }\n  registerUser(data) {\n    return this.httpClient.post('http://127.0.0.1:8000/api/register', data);\n  }\n  isLoggedIn() {\n    return !!localStorage.getItem(this.tokenKey);\n  }\n  login(data) {\n    return this.httpClient.post('http://127.0.0.1:8000/api/login', data);\n  }\n  uploadFile(event) {\n    const file = event.target.files[0];\n    const formData = new FormData();\n    formData.append('file', file);\n    this.httpClient.post('http://localhost:3000/upload', formData).subscribe(response => {\n      console.log(response);\n    });\n  }\n}\nCrudService.ɵfac = function CrudService_Factory(t) {\n  return new (t || CrudService)(i0.ɵɵinject(i1.HttpClient));\n};\nCrudService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: CrudService,\n  factory: CrudService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"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","names":["catchError","map","throwError","HttpHeaders","User","CrudService","constructor","httpClient","set","addMedicament","data","API_URL","REST_API","post","pipe","handleError","getMedicaments","get","getMedicament","id","headers","httpHeaders","res","deleteMedicament","delete","updateMedicament","put","error","errorMessage","ErrorEvent","message","status","console","log","registerUser","isLoggedIn","localStorage","getItem","tokenKey","login","uploadFile","event","file","target","files","formData","FormData","append","subscribe","response","factory","providedIn"],"sourceRoot":"","sources":["/home/windows/Documents/projects/WEBprojectHOPE/Frontend/src/app/service/crud.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport {Medicament} from './Medicament';\nimport { catchError,map } from 'rxjs/operators';\nimport { Observable,throwError } from 'rxjs';\nimport { HttpClient,HttpHeaders,HttpErrorResponse } from '@angular/common/http';\n\n// user class \nexport class User{\n\n  name!:String ;\n  email!:String;\n  password!:String;\n\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CrudService {\n  private tokenKey = 'token';\n\n\n\n  REST_API: string = 'http://127.0.0.1:8000/api/medicament' ; \n  httpHeaders= new HttpHeaders().set('Content-Type','application/json');\n  constructor(private httpClient: HttpClient){\n\n  }\n\n  addMedicament(data:Medicament):Observable<any>{\n\n    \n\n    let API_URL= `${this.REST_API}` ;\n    return this.httpClient.post(API_URL,data).pipe(catchError(this.handleError))\n  }\n\n  getMedicaments(){\n    return this.httpClient.get(`${this.REST_API}`);\n\n  }\n  getMedicament (id: any):Observable<any>{\n\n    let API_URL= `${this.REST_API}/${id}` ;\n    return this.httpClient.get(API_URL,{headers:this.httpHeaders}).pipe(map((res:any)=>{\n      return res || {}\n    }),\n      catchError(this.handleError))\n  }\n\n  deleteMedicament(id:any):Observable<any>{\n\n    let API_URL = `${this.REST_API}/${id}` ;\n    return this.httpClient.delete(API_URL,{headers: this.httpHeaders}).pipe(catchError(this.handleError));\n  }\n\n\n    updateMedicament(id:any, data:Medicament):Observable<any>{\n\n      let API_URL = `${this.REST_API}/${id}` ;\n      return this.httpClient.put(API_URL,data,{headers: this.httpHeaders}).pipe(catchError(this.handleError));\n    }\n\n  \n\n    handleError(error:HttpErrorResponse){\n      let errorMessage = '' ;\n      if ( error.error instanceof ErrorEvent){\n        errorMessage =error.error.message ;\n\n      }else {\n        errorMessage=`Error Code : ${error.status}\\n Message: ${errorMessage}`\n      }\n      console.log(errorMessage);\n\n      return throwError(errorMessage);\n    }\n\n    registerUser(data:any){\n      return this.httpClient.post('http://127.0.0.1:8000/api/register',data);\n\n\n    }\n\n    isLoggedIn(){\n\n      return !!localStorage.getItem (this.tokenKey) ;\n\n    }\n\n\n login(data:any){\n  return this.httpClient.post('http://127.0.0.1:8000/api/login',data)\n\n\n }   \n\n uploadFile(event: any) {\n  const file = event.target.files[0];\n  const formData = new FormData();\n  formData.append('file', file);\n  this.httpClient.post('http://localhost:3000/upload', formData).subscribe((response) => {\n    console.log(response);\n  });\n}\n}\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}