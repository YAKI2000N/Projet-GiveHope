{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet AddMedicamentComponent = class AddMedicamentComponent {\n  constructor(formBuilder, router, ngZone, crudService) {\n    this.formBuilder = formBuilder;\n    this.router = router;\n    this.ngZone = ngZone;\n    this.crudService = crudService;\n    this.shortLink = \"\";\n    this.loading = false;\n  }\n  ngOnInit() {\n    this.eventForm = this.formBuilder.group({\n      name: '',\n      description: '',\n      price: '',\n      image: \"\" // initialize with empty string\n    });\n  }\n\n  onSubmit() {\n    console.log(this.eventForm.value);\n    var formData = new FormData();\n    formData.append(\"name\", this.eventForm.get('name')?.value);\n    console.log(this.eventForm.get('name')?.value);\n    // formData.append('description', this.eventForm.get('description')?.value);\n    formData.append('description', this.eventForm.value.description);\n    formData.append('price', this.eventForm.get('price')?.value);\n    console.log(formData);\n    formData.append('image', this.eventForm.get('image')?.value, this.eventForm.get('image')?.value[0]);\n    console.log(formData.getAll('image'));\n    this.crudService.addMedicament(formData).subscribe(() => {\n      this.ngZone.run(() => this.router.navigateByUrl('/medicament-list'));\n    }, err => {\n      console.log(err);\n      // add proper error handling code\n    });\n  }\n  //public imageChange(event:any ){\n  //const file = (event.target as HTMLInputElement).files[0];\n  //this.eventForm.patchValue({\n  //imageSrc:file\n  //})\n  //this.eventForm.get('photo')?.updateValueAndValidity();\n  //}\n  imageChange(event) {\n    const files = event.target.files;\n    if (files && files.length > 0) {\n      const file = files[0];\n      console.log(files[0].name);\n      this.eventForm.patchValue({\n        image: file\n      });\n      this.eventForm.get('image')?.updateValueAndValidity();\n    }\n  }\n};\nAddMedicamentComponent = __decorate([Component({\n  selector: 'app-add-medicament',\n  templateUrl: './add-medicament.component.html',\n  styleUrls: ['./add-medicament.component.scss']\n})], AddMedicamentComponent);\nexport { AddMedicamentComponent };","map":{"version":3,"mappings":"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","names":["Component","AddMedicamentComponent","constructor","formBuilder","router","ngZone","crudService","ngOnInit","eventForm","group","name","description","price","image","onSubmit","console","log","value","formData","FormData","append","get","getAll","addMedicament","subscribe","run","navigateByUrl","err","imageChange","event","files","target","length","file","patchValue","updateValueAndValidity","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/home/windows/Documents/projects/WEBprojectHOPE/Frontend/src/app/Views/product/medicament/add-medicament/add-medicament.component.ts"],"sourcesContent":["import { Component, OnInit, NgZone } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { CrudService } from 'src/app/service/crud.service';\nimport { FormGroup, FormBuilder } from '@angular/forms';\nimport { saveAs } from 'file-saver';\nimport { Medicament } from 'src/app/service/Medicament';\n\n\n@Component({\n  selector: 'app-add-medicament',\n  templateUrl: './add-medicament.component.html',\n  styleUrls: ['./add-medicament.component.scss']\n})\nexport class AddMedicamentComponent implements OnInit {\n\n\n\n\n   eventForm!:FormGroup;\n  shortLink: string = \"\";\n    loading: boolean = false; \n  file: any;\n  imageSrc : any ;\n\n  constructor(\n    public formBuilder: FormBuilder,\n    private router: Router,\n    private ngZone: NgZone,\n    public crudService: CrudService,\n  ) {\n    \n  }\n\n  ngOnInit(): void {\n\n    this.eventForm = this.formBuilder.group({\n      name: '',\n      description: '',\n      price: '',\n      image: \"\"// initialize with empty string\n    });\n\n   \n    \n  }\n\n  onSubmit() {\n    console.log(this.eventForm.value)\n    var formData = new FormData();\n    formData.append(\"name\",this.eventForm.get('name')?.value);\n    console.log(this.eventForm.get('name')?.value)\n\n\n    // formData.append('description', this.eventForm.get('description')?.value);\n    formData.append('description', this.eventForm.value.description )\n    formData.append('price', this.eventForm.get('price')?.value);\n    console.log(formData)\n\n\n\n   formData.append('image',this.eventForm.get('image')?.value,this.eventForm.get('image')?.value[0]);\n   \n   console.log(formData.getAll('image'));\n   \n  \n    this.crudService.addMedicament(formData).subscribe(\n      \n      () => {\n        \n        this.ngZone.run(() => this.router.navigateByUrl('/medicament-list'));\n      },\n      (err) => {\n        console.log(err);\n        // add proper error handling code\n      }\n    );\n  }\n\n //public imageChange(event:any ){\n\n  //const file = (event.target as HTMLInputElement).files[0];\n  //this.eventForm.patchValue({\n    //imageSrc:file\n  //})\n\n  //this.eventForm.get('photo')?.updateValueAndValidity();\n //}\n\n  public imageChange(event: Event): void {\nconst files = (event.target as HTMLInputElement).files;\n  if (files && files.length > 0) {\n    const file = files[0];\n    console.log(files[0].name)\n\n    this.eventForm.patchValue({\n      image: file\n    });\n    this.eventForm.get('image')?.updateValueAndValidity();\n  }\n}\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}